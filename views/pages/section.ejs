<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>

    <link rel="stylesheet" href="/css/base.css" />
    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/css/class.css" />
</head>
<body>

<%- include("../layouts/header") %>

<main class="container">

    <!-- ================= HEADER ================= -->
    <section class="section-header">
        <h1><%= title.toUpperCase() %></h1>
        <p>Class <%= classNumber %> Computer Science</p>
    </section>

    <!-- ================= CONTENT ================= -->
    <% if (contents && contents.length > 0) { %>
        <section class="content-grid">

            <% contents.forEach(item => { %>

                <!-- ===== VIDEO ===== -->
                <% if (item.contentType === "video") { 
                    let embedUrl = "";

                    if (item.videoUrl.includes("youtu.be/")) {
                        embedUrl =
                            "https://www.youtube.com/embed/" +
                            item.videoUrl.split("youtu.be/")[1].split(/[?&]/)[0];
                    } else if (item.videoUrl.includes("watch?v=")) {
                        embedUrl =
                            "https://www.youtube.com/embed/" +
                            item.videoUrl.split("watch?v=")[1].split(/[?&]/)[0];
                    } else if (item.videoUrl.includes("embed/")) {
                        embedUrl = item.videoUrl;
                    }
                %>

                    <div class="content-card video-card">
                        <iframe
                            src="<%= embedUrl %>"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>

                        <h3><%= item.title %></h3>
                        <p><%= item.description || "" %></p>
                    </div>

                <% } %>

                <!-- ===== PDF ===== -->
                <% if (item.contentType === "pdf") { %>
                    <div class="content-card pdf-card">
                        <h3><%= item.title %></h3>
                        <p><%= item.description || "" %></p>
                        <a href="<%= item.fileUrl %>" target="_blank" class="btn">
                            Download PDF
                        </a>
                    </div>
                <% } %>

            <% }) %>

        </section>
    <% } %>

    <!-- ================= PROJECTS ================= -->
    <% if (projects && projects.length > 0) { %>

        <section class="projects-section">

            <!-- Intro videos -->
            <div class="content-card video-card">
                <iframe src="https://www.youtube.com/embed/VIDEO_ID_PROJECT_OVERVIEW"></iframe>
                <h3>All About Projects & Synopsis</h3>
            </div>

            <div class="content-card video-card">
                <iframe src="https://www.youtube.com/embed/VIDEO_ID_PROJECT_CREATION"></iframe>
                <h3>Create Project on Any Topic</h3>
            </div>

            <hr />

            <% projects.forEach(project => { %>
                <div class="project-row">
                    <a href="<%= project.videoUrl %>" target="_blank">
                        Video Explanation
                    </a>

                    <span><%= project.title %></span>

                    <a href="<%= project.zipUrl %>" target="_blank">
                        Download ZIP
                    </a>
                </div>
            <% }) %>

        </section>

    <% } %>

    <!-- ================= EMPTY STATE ================= -->
    <% if ((!contents || contents.length === 0) && (!projects || projects.length === 0)) { %>
        <p>No content available yet.</p>
    <% } %>

</main>

<%- include("../layouts/footer") %>

</body>
</html>
